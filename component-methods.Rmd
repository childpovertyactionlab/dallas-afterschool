---
title: "Components and Methods"
output:
  distill::distill_article:
    toc: TRUE
    theme: theme.css
---

## Understanding Afterschool Programs in Dallas County
[Introduce the concept of supply and demand as individual components and how they can help identify gaps in Dallas County.]
Dallas Afterschool Programs by Census Tract

```{r, map of DAS afterschool programs in county, echo = FALSE, message=FALSE, warning=FALSE, layout="l-page", fig.height=8}
# Generate Jenks Breaks for plot
brks_das <- BAMMtools::getJenksBreaks(dasmetrics$ProgSqMi, k = 6)
dasmetrics$group <- cut(dasmetrics$ProgSqMi,
                             breaks = brks_das,
                       include.lowest = TRUE)
labs_das <- round(brks_das)

# Generate labels based on Jenks breaks for plot
labs_plot <- paste0("(", labs_das[1:5], " - ", labs_das[2:6], ")")

# Generate Plot
ggplot() +
  geom_sf(data = dasmetrics, aes(fill = group), color = "#595959") +
  geom_sf(data = dallasCounty, color = "#323232", fill = NA, size = 2) +
  geom_sf(data = highways, color = "#323232", size = 1) +
  scale_fill_brewer(name = "",
                    palette = "BuPu",
                    label = labs_plot,
                    guide = guide_legend(direction = "horizontal",
                                         nrow = 1,
                                         label.position = "top")) +
  labs(title = "After School Program Density (per Square Mile)",
       #subtitle = "U.S. Census Bureau, American Community Survey 5-Year Estimates 2020",
       x = "",
       y = "",
       color = "") +
  theme_void() +
  theme(legend.position = "bottom",
        legend.key.width = unit(0.5, units = "in"),
        plot.caption = element_text(size = 36, face = "italic"),
        legend.spacing = unit(0, "in"), 
        legend.key.height = unit(0.25, "in"), 
        legend.spacing.x = unit(0.1, "in"), 
        legend.justification = "center",
        legend.margin=margin(4,4,4,4),
        legend.box.spacing = margin(0.5))

```

Population dot density by race/ethnicity

```{r, dot density population, echo = FALSE, message=FALSE, warning=FALSE, layout="l-page", fig.height=8}
ggplot() +
  geom_sf(data = dotdensity,
          aes(color = variable),
          size = 0.001) +
  geom_sf(data = dallasCounty, color = "#323232", fill = NA, size = 2) +
  geom_sf(data = highways, color = "#323232", size = 1) +
  scale_color_manual(values = pal_cpalfac) +
  labs(title = "Dot Density Map of Dallas County by Race/Ethnicity",
       subtitle = "1 Dot Per 25 Residents (U.S. Census Bureau, 2020 Census)",
       caption = "",
       x = "",
       y = "",
       color = "") +
  theme_void() +
  theme(legend.position = "bottom",
        legend.key.width = unit(0.5, units = "in"),
        plot.caption = element_text(size = 36, face = "italic"),
        legend.spacing = unit(0, "in"), 
        legend.key.height = unit(0.25, "in"), 
        legend.spacing.x = unit(0.1, "in"), 
        legend.justification = "center",
        legend.margin=margin(4,4,4,4),
        legend.box.spacing = margin(0.5)) +
  guides(colour = guide_legend(override.aes = list(size=10)))

```
## Existing Afterschool Environment

[Describe metrics included in Existing Afterschool Environment and reasons for their inclusion]

### Summary of Current Programs

[Table or chart summarizing total number of programs and seats by type.]

### Programs in Dallas County

[ggplot2 map of Dallas Afterschool, CACFP, and HHS programs]

## Current Neighborhood Conditions

[Describe metrics included in Current Neighborhood Conditions and reasons for their inclusion]

### Expected Population

[Summary of population variables for Dallas County. How many families/children do we expect could go to Afterschool programs in the county?]
[Specific family types (Single-mother households, households below poverty, etc.)]

## Methodology 

[Basic description of methodology and reason for use of components]